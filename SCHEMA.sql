CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  username TEXT UNIQUE,
  profile_picture TEXT,
  bio TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE sets(
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  name TEXT,
  description TEXT,
  created TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE cards(
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  set_id BIGINT REFERENCES sets(id) ON DELETE CASCADE NOT NULL,
  front TEXT,
  back TEXT,
  created TIMESTAMPTZ DEFAULT NOW()
);